# 响应式原理

## 给对象逐个添加观察者及绑定
1. 对最开始的对象进行observe
2. 绑定了观察者对象后对子属性进行逐个绑定 walk函数
3. defineReactive函数中调用observe确保能递归
4. 数组需要重写几个方法，确保数组的方法能触发更新

## 发布订阅者模式
1. 每一个观察者中都存在一个依赖Dep
2. Dep类中有：
   1. 订阅器：收集使用了该数据的所有watcher
   2. 触发依赖：从全局中获取使用了发生变化的数据的watcher，存放到订阅器中并触发了数据的getter，get函数再将所有依赖于这个数据的watcher放入Dep容器中，此时已经收集了所有的watcher
   3. 触发器：触发所有的订阅者，让他们更新
3. Watcher类中有：
   1. 更新函数：触发时会唤起get()方法获取新的值并执行回调传入新旧两个值
   2. get方法将Dep.target指向当前的watcher实例，触发更新
   3. run/invoke函数，获取最新的值并执行回调函数
